超前版，将开关的控制加入了进去
7.12 PM 修整逻辑
