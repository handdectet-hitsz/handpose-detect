超前版，将开关的控制加入了进去